# PAM

Запустим виртуальную машину командой:

#### `vagrant up`

После запуска все настройки будут применены автоматически. Виртуальная машина будет настроена, пользователи созданы, группы назначены, а ограничения на вход в систему добавлены.

Настройка пользователей и групп

Созданы два пользователя: `otusadm` и `otus`.

Установлены пароли для пользователей.

Создана группа `admin`, в которую были добавлены пользователи `otusadm`, `root` и `vagrant`.

`otusadm` наделен правами администратора.

Настройка PAM для запрета входа в выходные дни

Создан скрипт `/usr/local/bin/login.sh`, который проверяет текущий день недели и разрешает или запрещает вход в систему на основе этого условия.

Если текущий день — суббота или воскресенье, доступ разрешается только пользователям из группы admin. В другие дни доступ разрешен всем пользователям.

Скрипт был подключен к PAM через файл `/etc/pam.d/sshd` с использованием модуля `pam_exec`.

Настройка доступа к `Docker`

Установлен `Docker` на виртуальной машине.

Пользователь `otus` добавлен в группу `docker` для работы с Docker без использования `sudo`.

Пользователю `otus` предоставлено право перезапускать сервис Docker с использованием команды `systemctl` без ввода пароля.

Проверка работы

Дата на виртуальной машине установлена на 16 марта  2025 года, чтобы смоделировать работу в выходной день.

Проверена возможность подключения к системе пользователем `otus и otusadm` в выходной день:

Пользователь `otus` не может подключиться, так как не является членом группы admin.

Пользователь `otusadm` успешно подключается, так как является членом группы admin.

Заключение

В ходе выполнения задания были выполнены следующие действия:

Создан Vagrantfile, который автоматически разворачивает виртуальную машину и выполняет все необходимые настройки, включая создание пользователей, групп и ограничение входа по времени.

Настроен контроль доступа с использованием PAM и создан скрипт для запрета входа в выходные дни для обычных пользователей.

Настроены права на работу с Docker для пользователя otus, включая возможность перезапускать Docker-сервис.
